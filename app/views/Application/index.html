#{extends 'main.html' /}
#{set title:'WhenWasIt?' /}

<div>
    <header>
        <h1>WhenWasIt?</h1>
    </header>
    <article>

        <fieldset>
            <span id="minus_date">${date}</span>
            <span class="sign">=</span>
            <input id="minus" value="days"/>
            <span class="sign">-</span>
        </fieldset>

        <div type="text" id="datepicker"></div>

        <fieldset>
            <span class="sign">+</span>
            <input id="plus" value="days"/>
            <span class="sign">=</span>
            <span id="plus_date">${date}</span>
        </fieldset>

    </article>
    <footer>
        <p>Compiled by <a href="http://twitter.com/torbjornvatn">@torbjornvatn</a></p>
    </footer>
</div>

<script>
    $(document).ready(function() {
        $("#datepicker").datepicker();
    });

        var calculateAction = #{jsAction @calculate(':date', ':extraDays') /}
        $("#plus").bind("keyup", function(event){
            if ( event.which > 47 &&  event.which < 58) {
                $.post(calculateAction({date: $("#datepicker").val(), extraDays: $("#plus").val()}), function(data) {
                    alert("Data Loaded: " + data);
                });
            }
        });
</script>